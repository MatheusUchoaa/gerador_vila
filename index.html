<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Times da Villa</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="style.css?v=2.1">
</head>
<body>
    <div class="container d-flex flex-column min-vh-100">
        <header class="text-center my-4 py-3 rounded-3">
            <div class="logo-container mb-3">
                <img src="img/logo.jpg" alt="Logo V√¥lei Villa" class="logo-image img-fluid">
            </div>
            <h1 class="fw-bold">Gerador de Times da Vila</h1>
            <p class="mb-3">Insira os nomes dos jogadores</p>
        </header>
        
        <main class="flex-grow-1">
            <div class="row justify-content-center">
                <div class="col-md-8 col-lg-6">
                    <section class="mb-5 p-4 rounded-3">
                        <h2 class="text-center mb-4">Adicionar Jogador</h2>
                        <form id="player-form" class="mb-4">
                            <input type="hidden" id="player-id" value="">
                            <div class="mb-3">
                                <label for="player-name" class="form-label">Nome do Jogador</label>
                                <input type="text" id="player-name" class="form-control" placeholder="Ex: Prefeito Junior" required>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">N√≠vel</label>
                                    <div class="level-options">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="player-level" id="level-ok" value="ok" required>
                                            <label class="form-check-label" for="level-ok">OK ‚≠ê</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="player-level" id="level-bom" value="bom">
                                            <label class="form-check-label" for="level-bom">Bom ‚≠ê‚≠ê</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="player-level" id="level-otimo" value="√≥timo">
                                            <label class="form-check-label" for="level-otimo">√ìtimo ‚≠ê‚≠ê‚≠ê</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="player-level" id="level-delicioso" value="delicioso">
                                            <label class="form-check-label" for="level-delicioso">Delicioso üî•üî•üî•</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">G√™nero</label>
                                    <div class="gender-options">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="player-gender" id="gender-male" value="masculino" required>
                                            <label class="form-check-label" for="gender-male">Masculino ‚ôÇ</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="player-gender" id="gender-female" value="feminino">
                                            <label class="form-check-label" for="gender-female">Feminino ‚ôÄ</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="player-setter">
                                        <label class="form-check-label" for="player-setter">
                                            <i class="bi bi-hand-index-thumb"></i> Este jogador √© levantador
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="player-attacker">
                                        <label class="form-check-label" for="player-attacker">
                                            <i class="bi bi-lightning-charge"></i> Este jogador √© atacante
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-add" id="submit-button">
                                    <i class="bi bi-plus-circle"></i> Adicionar Jogador
                                </button>
                                <button type="button" class="btn btn-secondary" id="cancel-edit" style="display: none;">
                                    Cancelar Edi√ß√£o
                                </button>
                            </div>
                        </form>
                    </section>

                    <section class="p-4 rounded-3">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h2 class="mb-0">Jogadores Adicionados</h2>
                            <span class="badge bg-primary rounded-pill" id="player-count">
                                <i class="bi bi-people-fill me-1"></i>0
                            </span>
                        </div>

                        <!-- Buscador de Jogadores -->
                        <div class="search-section mb-3">
                            <div class="search-input-wrapper">
                                <i class="bi bi-search search-icon"></i>
                                <input type="text" id="player-search" class="form-control search-input" placeholder="Buscar jogador..." autocomplete="off">
                                <button type="button" id="clear-search" class="clear-btn" title="Limpar">
                                    <i class="bi bi-x"></i>
                                </button>
                            </div>
                            </small>
                        </div>
                        
                        <div class="alert alert-info d-flex align-items-center mb-3">
                            <i class="bi bi-info-circle-fill me-2"></i>
                            <div>
                                Clique em um jogador para editar ou no √ó para remover
                            </div>
                        </div>
                        
                        <div id="player-database" class="mb-4">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="mb-0">Banco de Jogadores</h5>
                                <div class="d-flex gap-2">
                                    <button class="btn btn-sm btn-outline-success" id="reload-firebase-players" title="Recarregar jogadores do Firebase">
                                        <i class="bi bi-arrow-clockwise"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-primary" id="toggle-saved-players">
                                        <i class="bi bi-chevron-right"></i>
                                        <span class="ms-1">Expandir</span>
                                    </button>
                                </div>
                            </div>
                            <div class="d-flex flex-wrap gap-2" id="saved-players-list" style="display: none;">
                                <!-- Jogadores salvos aparecer√£o aqui -->
                            </div>
                        </div>
                        
                        <ul id="player-list" class="list-group mb-4">
                            <li class="list-group-item text-center text-muted py-4">
                                Nenhum jogador adicionado ainda.<br>
                                Adicione jogadores usando o formul√°rio acima.
                            </li>
                        </ul>
                        
                        <div class="d-grid gap-3">
                            <button id="generate-team" class="btn btn-generate">
                                <i class="bi bi-people-fill"></i> Gerar Times
                            </button>
                            <button id="regenerate-team" class="btn btn-generate" style="display: none;">
                                <i class="bi bi-arrow-repeat"></i> Sortear Novamente
                            </button>
                            <button id="clear-players" class="btn btn-clear">
                                <i class="bi bi-trash-fill"></i> Limpar Todos
                            </button>
                        </div>
                        
                        <div id="team-output" class="mt-4 p-3 rounded-3">
                            <!-- Os times gerados aparecer√£o aqui -->
                        </div>
                    </section>
                </div>
            </div>
        </main>

        <footer class="text-center mt-auto py-3 rounded-top">
            <div class="d-flex justify-content-center gap-3 mb-2">
                <a href="#" class="text-decoration-none" data-bs-toggle="tooltip" title="Instru√ß√µes">
                    <i class="bi bi-question-circle-fill"></i>
                </a>
                <a href="#" class="text-decoration-none" data-bs-toggle="tooltip" title="Sobre">
                    <i class="bi bi-info-circle-fill"></i>
                </a>
            </div>
            <p class="mb-0">&copy; 2025 por Matheus Uchoa | V√¥lei Villa</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Firebase SDKs -->
    <script type="module">
        // Import Firebase modules from CDN
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAnalytics } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js';
        import { getDatabase, ref, push, set, get, onValue, update, remove } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
        
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC5tDXJpe-JdC83kd9VE0Tc8V70Dblztu4",
            authDomain: "gerador-times-volei.firebaseapp.com",
            databaseURL: "https://gerador-times-volei-default-rtdb.firebaseio.com",
            projectId: "gerador-times-volei",
            storageBucket: "gerador-times-volei.firebasestorage.app",
            messagingSenderId: "133601686847",
            appId: "1:133601686847:web:9f60913fa7ce7a1dda4f8a",
            measurementId: "G-3QQ5PSND5M"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const database = getDatabase(app);
        
        // Make Firebase available globally
        window.firebaseApp = app;
        window.firebaseAnalytics = analytics;
        window.firebaseDatabase = database;
        window.firebaseRef = ref;
        window.firebasePush = push;
        window.firebaseSet = set;
        window.firebaseGet = get;
        window.firebaseOnValue = onValue;
        window.firebaseUpdate = update;
        window.firebaseRemove = remove;
        
        // Disponibiliza m√≥dulos do Firebase para uso no script
        window.firebaseModules = {
            getDatabase: () => database,
            ref: ref,
            set: set,
            get: get,
            push: push,
            onValue: onValue,
            update: update,
            remove: remove
        };
        
        console.log('üî• Firebase inicializado e fun√ß√µes disponibilizadas globalmente');
    </script>
    
    <script src="script.js"></script>
</body>
</html>